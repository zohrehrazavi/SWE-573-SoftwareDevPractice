<!DOCTYPE html>
<html>
  <head>
    <title>Home - Connect the Dots</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/home.css' %}" />
  </head>
  <body>
    <div class="container">
      <!-- Header with welcome message and logout -->
      <header class="header">
        <div class="welcome-section">
          <h1>
            Welcome!
            <span class="username">{{ user.username }}</span>
          </h1>
        </div>
        <form method="post" action="{% url 'logout' %}" style="margin: 0;">
          {% csrf_token %}
          <button type="submit" class="logout-btn">Logout</button>
        </form>
      </header>

      <div class="main-content">
        <!-- Left side: Search and Create Board -->
        <div class="search-section">
          <input
            type="text"
            class="search-bar"
            placeholder="Search boards by name or tags..."
            id="boardSearch"
          />
          <a href="{% url 'create_board' %}" class="create-board-btn">
            Create a New Research Board
          </a>
        </div>

        <!-- Right side: Boards List -->
        <div class="boards-section">
          <h2>Your Boards</h2>
          {% if boards %}
          <ul class="boards-list">
            {% for board in boards %}
            <li class="board-item">
              <a href="{% url 'board_detail' board.id %}" class="board-link">
                {{ board.name }}
              </a>
              <div class="board-meta">
                Created on {{ board.created_at|date:"F j, Y, g:i a" }}
              </div>
            </li>
            {% endfor %}
          </ul>
          {% else %}
          <p>You haven't created any boards yet.</p>
          {% endif %}
        </div>
      </div>
    </div>

    <script>
      // Simple client-side search functionality
      document
        .getElementById('boardSearch')
        .addEventListener('input', function (e) {
          const searchTerm = e.target.value.toLowerCase()
          const boardItems = document.querySelectorAll('.board-item')

          boardItems.forEach((item) => {
            const boardName = item
              .querySelector('.board-link')
              .textContent.toLowerCase()
            if (boardName.includes(searchTerm)) {
              item.style.display = ''
            } else {
              item.style.display = 'none'
            }
          })
        })
    </script>
  </body>
</html>
